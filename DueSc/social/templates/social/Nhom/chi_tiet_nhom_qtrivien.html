{% extends 'social/group.html' %}
{% load static %}

{% block title %}Chi tiết nhóm - DUE Social{% endblock %}

{% block content_body %}
   <div class="shadow-md">
       <!-- Ảnh bìa -->
       <div class="relative">
           <img src="{% static 'image/Nhom/nhom1.png' %}" alt="Ảnh nhóm" class="w-full h-48 object-cover">
       </div>

       <!-- Nội dung nhóm -->
       <div class="p-4">
           <div class="flex justify-between items-start">
               <div>
                   <h2 class="text-xl font-semibold text-gray-900">{{ nhom.TenNhom }}</h2>
                   <div class="text-sm text-gray-500 flex items-center space-x-1">
                       <i class="fas fa-lock"></i>
                       <span>Nhóm {% if nhom.trang_thai_nhom == 'Riêng tư' %}Riêng Tư{% else %}Công khai{% endif %}</span>
                   </div>
               </div>
               <!-- Nút mở modal Mời -->
               <button id="openInviteModal" class="bg-green-300 text-gray-800 px-3 py-1 rounded-lg hover:bg-green-400 transition duration-300 text-sm font-semibold">
                   + Mời
               </button>

               <!-- Modal mời thành viên -->
               <div id="inviteModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
                   <!-- Modal content remains unchanged -->
               </div>
           </div>
           <!-- Nút xoá nhóm -->
           <div class="mt-3">
               <button id="deleteBtn" class="bg-red-400 text-white px-4 py-1 rounded-lg hover:bg-red-500 transition duration-300 font-semibold">
                   Xoá nhóm
               </button>
               <!-- Modal xác nhận xoá -->
               <div id="deleteModal" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50 hidden">
                   <!-- Modal content remains unchanged -->
               </div>
           </div>
       </div>
       <!-- Menu -->
       <div class="border-t px-4 py-2 grid grid-cols-2 md:grid-cols-4 text-sm font-medium text-center text-gray-600">
           <a href="{% url 'chi_tiet_nhom_qtrivien' MaNhom=nhom.MaNhom %}" class="py-2 hover:text-blue-600 cursor-pointer">Bảng tin nhóm</a>
           <a href="{% url 'duyet_thanh_vien' MaNhom=nhom.MaNhom %}" class="py-2 hover:text-blue-600 cursor-pointer">Phê duyệt thành viên</a>
           <a href="{% url 'duyet_bai_viet' MaNhom=nhom.MaNhom %}" class="py-2 hover:text-blue-600 cursor-pointer">Phê duyệt bài viết</a>
           <a href="{% url 'thanh_vien_nhom' MaNhom=nhom.MaNhom %}" class="py-2 hover:text-blue-600 cursor-pointer">Thành viên của nhóm</a>
       </div>
   </div>
{% endblock %}

{% block post %}
   <!-- Khu vực đăng bài -->
   <div class="bg-white rounded-lg shadow-md p-6 mb-6 mt-6">
       <div class="flex items-center space-x-4 mb-4">
           <img src="{% if nguoi_dung.avatar %}{{ nguoi_dung.avatar.url }}{% else %}/static/default-avatar.png{% endif %}" alt="Avatar" class="w-10 h-10 rounded-full">
           <button id="open-post-modal" class="w-full text-left bg-gray-100 rounded-full py-3 px-4 focus:outline-none focus:ring-2 focus:ring-blue-500">Hãy đăng bài viết!</button>
       </div>
       <div class="border-t border-gray-200 pt-3 flex justify-around">
           <button class="open-media-modal flex items-center text-gray-600 hover:bg-gray-100 rounded-md px-3 py-2" data-type="video">
               <i class="fas fa-video text-red-500 mr-2"></i>
               <span>Video</span>
           </button>
           <button class="open-media-modal flex items-center text-gray-600 hover:bg-gray-100 rounded-md px-3 py-2" data-type="image">
               <i class="fas fa-image text-green-500 mr-2"></i>
               <span>Hình ảnh</span>
           </button>
           <button class="open-media-modal flex items-center text-gray-600 hover:bg-gray-100 rounded-md px-3 py-2" data-type="file">
               <i class="fas fa-file-alt text-yellow-500 mr-2"></i>
               <span>Tệp tài liệu</span>
           </button>
           <button class="open-media-modal flex items-center text-gray-600 hover:bg-gray-100 rounded-md px-3 py-2" data-type="poll">
               <i class="fas fa-poll text-blue-500 mr-2"></i>
               <span>Thăm dò ý kiến</span>
           </button>
       </div>
   </div>

   <!-- Danh sách bài viết -->
   <div id="posts-list" data-group-id="{{ nhom.MaNhom }}">
       {% for post in posts_with_details %}
       {% if post.post.TrangThai %}
       <!-- Post content remains unchanged -->
       {% endif %}
       {% empty %}
       <p class="text-center text-gray-500 mt-4">Chưa có bài viết nào trong nhóm này.</p>
       {% endfor %}
   </div>

   <!-- Include post creation partial -->
   {% include 'social/Nhom/post_creation_partial.html' %}
{% endblock %}